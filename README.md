# korea-bjd-shp-to-csv

**대한민국 법정동 쉐이프파일(.shp) 전처리 및 CSV 변환 도구**

GeoPandas를 이용해 브이월드 등에서 제공하는 법정동(읍면동/리) 쉐이프파일을 읽어, 데이터 분석과 검색에 즉시 활용 가능한 **깔끔한 CSV 파일**로 변환하는 파이썬 유틸리티입니다.

## 주요 기능

1.  **지오메트리 연산:**
    * 법정동의 **중심좌표(위도, 경도)**를 자동으로 추출합니다.
    * **`radius_km` 계산:** 미터 단위 좌표계(EPSG:5179)로 변환하여 외접 사각형의 대각선 절반 길이를 계산합니다. 이는 특정 좌표와 법정동 중심지 사이의 거리를 적절히 조정하기 위한 매개변수입니다. 일례로, 특정 좌표에서 가장 가까운 법정동을 구할 때 '중심지와의 거리 - radius_km'을 사용할 수 있습니다.
2.  **데이터 정제 (Cleansing):**
    * **코드 표준화:** 8자리(읍면동) 코드는 자동으로 '00'을 패딩하여 **10자리 표준 코드**로 변환합니다.
    * **오류 검증:** 코드가 숫자가 아니거나, 법정동명에 한글이 없는 유효하지 않은 데이터를 자동으로 필터링하여 `error.csv`로 분리합니다.
3.  **파일 통합:** 
    * 여러 개로 쪼개진 쉐이프파일(.shp)의 정보들을 하나의 CSV 파일로 병합합니다. 원본 추적을 위해 행별로 데이터가 유래한 파일명을 기록합니다. DB에 지오메트리를 업로드할 때 활용해 보세요.

## 데이터 출처

* **출처:** [브이월드 공간정보 다운로드(회원가입 필요)](https://www.vworld.kr/dtmk/dtmk_ntads_s001.do)
* **카테고리:** 국토관리 > 지역개발 > 행정구역_리(법정동), 행정구역_읍면동(법정동) 

## 사용법 (Usage)

### 1. 환경 설정
```bash
pip install geopandas pandas tqdm
```

### 2. 디렉토리 구조 및 실행
다운로드한 `.shp` 파일들을 `input` 폴더에 넣고 스크립트를 실행합니다.

```text
korea-bjd-shp-to-csv/
├── input/                 # 여기에 .shp 파일들을 넣으세요 (LSMD_...)
├── output/                # 결과물이 여기에 생성됩니다
└── bjd_geometry_to_csv.py # 실행 스크립트
```

```bash
python bjd_geometry_to_csv.py
```

## 결과물 명세

생성되는 CSV 파일의 컬럼 구성입니다.

| 컬럼명 | 설명 | 예시 |
| :--- | :--- | :--- |
| `legal_dong_code` | 법정동코드 (10자리 표준) | `4159025321` |
| `legal_dong_tip` | 법정동명 마지막 단위 | `상면` |
| `COL_ADM_SECT_CD` | 원천시군구코드 | `41590` |
| `center_latitude` | 중심점 위도 (EPSG:4326) | `37.8123...` |
| `center_longitude` | 중심점 경도 (EPSG:4326) | `127.456...` |
| `radius_km` | **외접원 반경 (검색 보정용)** | `2.45` (km) |
| `filename` | 원천 파일명 | `LSMD_...shp` |

## bjd_251117_2212_result.csv
**2025. 11. 17.자 계산 결과물**을 함께 업로드해 드립니다. 법정동 코드, 중심좌표 등 데이터만 필요하신 분은 이것만 다운받으셔도 됩니다.

## 라이선스
MIT License
